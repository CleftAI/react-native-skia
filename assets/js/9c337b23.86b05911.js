"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1075],{1184:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var a=n(4041);const r={},s=a.createContext(r);function i(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:t},e.children)}},4893:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"animations/textures","title":"Textures","description":"In React Native Skia, we can use Reanimated to create textures on the UI thread directly.","source":"@site/docs/animations/textures.md","sourceDirName":"animations","slug":"/animations/textures","permalink":"/react-native-skia/docs/animations/textures","draft":false,"unlisted":false,"editUrl":"https://github.com/shopify/react-native-skia/edit/main/docs/docs/animations/textures.md","tags":[],"version":"current","frontMatter":{"id":"textures","title":"Textures","sidebar_label":"Textures","slug":"/animations/textures"},"sidebar":"tutorialSidebar","previous":{"title":"Hooks","permalink":"/react-native-skia/docs/animations/hooks"},"next":{"title":"Tutorials","permalink":"/react-native-skia/docs/tutorials"}}');var r=n(1085),s=n(1184);const i={id:"textures",title:"Textures",sidebar_label:"Textures",slug:"/animations/textures"},o=void 0,c={},u=[{value:"<code>useTexture</code>",id:"usetexture",level:2},{value:"<code>useImageAsTexture</code>",id:"useimageastexture",level:2},{value:"<code>usePictureAsTexture</code>",id:"usepictureastexture",level:2},{value:"Under the hood",id:"under-the-hood",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"In React Native Skia, we can use Reanimated to create textures on the UI thread directly."}),"\n",(0,r.jsx)(t.h2,{id:"usetexture",children:(0,r.jsx)(t.code,{children:"useTexture"})}),"\n",(0,r.jsx)(t.p,{children:"This hook allows you to create textures from React elements.\nIt takes a React element and the dimensions of the texture as arguments and returns a Reanimated shared value that contains the texture."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { useWindowDimensions } from "react-native";\nimport { useTexture } from "@shopify/react-native-skia";\nimport { Image, Rect, rect, Canvas, Fill } from "@shopify/react-native-skia";\nimport React from "react";\n\nconst Demo = () => {\n  const {width, height} = useWindowDimensions();\n  const texture = useTexture(\n      <Fill color="cyan" />,\n    { width, height }\n  );\n  return (\n    <Canvas style={{ flex: 1 }}>\n      <Image image={texture} rect={{ x: 0, y: 0, width, height }} />\n    </Canvas>\n  )\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"useimageastexture",children:(0,r.jsx)(t.code,{children:"useImageAsTexture"})}),"\n",(0,r.jsx)(t.p,{children:"This hook allows you to upload an image to the GPU.\nIt accepts an image source as argument.\nIt will first load the image from its source and then upload it to the GPU."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { useWindowDimensions } from "react-native";\nimport { useImageAsTexture } from "@shopify/react-native-skia";\nimport { Image, Rect, rect, Canvas, Fill } from "@shopify/react-native-skia";\nimport React from "react";\n\nconst Demo = () => {\n  const {width, height} = useWindowDimensions();\n  const texture = useImageAsTexture(\n    require("./assets/image.png")\n  );\n  return (\n    <Canvas style={{ flex: 1 }}>\n      <Image image={texture} rect={{ x: 0, y: 0, width, height }} />\n    </Canvas>\n  )\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"usepictureastexture",children:(0,r.jsx)(t.code,{children:"usePictureAsTexture"})}),"\n",(0,r.jsxs)(t.p,{children:["The hook allows you to create a texture from an ",(0,r.jsx)(t.code,{children:"SkPicture"}),".\nThis is useful to either generate the drawing commands outside the React lifecycle or using the imperative API to build a texture."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import {useWindowDimensions} from "react-native";\nimport { usePictureAsTexture } from "@shopify/react-native-skia";\nimport { Image, Rect, rect, Canvas, Fill, Skia } from "@shopify/react-native-skia";\nimport React from "react";\n\nconst rec = Skia.PictureRecorder();\nconst canvas = rec.beginRecording();\ncanvas.drawColor(Skia.Color("cyan"));\nconst picture = rec.finishRecordingAsPicture();\n\nconst Demo = () => {\n  const {width, height} = useWindowDimensions();\n  const texture = usePictureAsTexture(\n    picture,\n    { width, height }\n  );\n  return (\n    <Canvas style={{ flex: 1 }}>\n      <Image image={texture} rect={{ x: 0, y: 0, width, height }} />\n    </Canvas>\n  )\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"under-the-hood",children:"Under the hood"}),"\n",(0,r.jsxs)(t.p,{children:["Reanimated 2 provides a ",(0,r.jsx)(t.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/threading/runOnUI",children:(0,r.jsx)(t.code,{children:"runOnUI"})})," function that enables the execution of JavaScript code on the UI thread. This function is particularly useful for creating GPU textures that can be rendered directly onto an onscreen canvas."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:"twoslash",children:'import { useEffect } from "react";\nimport { runOnUI, useSharedValue } from "react-native-reanimated";\nimport type { SharedValue } from "react-native-reanimated";\nimport { Skia, Canvas, Image } from "@shopify/react-native-skia";\nimport type { SkImage } from "@shopify/react-native-skia";\n\nconst createTexture = (image: SharedValue<SkImage | null>) => {\n  "worklet";\n  const surface = Skia.Surface.MakeOffscreen(200, 200)!;\n  const canvas = surface.getCanvas();\n  canvas.drawColor(Skia.Color("cyan"));\n  surface.flush();\n  image.value = surface.makeImageSnapshot();\n}\n\nconst Demo = () => {\n  const image = useSharedValue<SkImage | null>(null);\n  useEffect(() => {\n    runOnUI(createTexture)(image);\n  }, []);\n  \n  return (\n    <Canvas style={{ flex: 1 }}>\n      <Image image={image} x={0} y={0} width={200} height={200} />\n    </Canvas>\n  );\n};\n'})}),"\n",(0,r.jsxs)(t.p,{children:["This example demonstrates how to create a texture, draw a cyan color onto it, and then display it using the ",(0,r.jsx)(t.code,{children:"Image"})," component from ",(0,r.jsx)(t.code,{children:"@shopify/react-native-skia"}),". The ",(0,r.jsx)(t.code,{children:"runOnUI"})," function ensures that the texture creation and drawing operations are performed on the UI thread for optimal performance."]}),"\n",(0,r.jsxs)(t.p,{children:["Make sure that you have installed the necessary packages and configured your project to use Reanimated 2 and ",(0,r.jsx)(t.code,{children:"@shopify/react-native-skia"})," before running this code."]})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);